# ジョブ実行対象サーバ除外ツール

## 1. 目的
JP1/AJSなどのジョブ管理システムや運用管理ツールで使用する定義ファイル（confやcsv）から、撤去済み・削除対象のサーバ情報を**自動的に除去**するためのツールです。
対象サーバ一覧から、手作業で削除対象行を探して消すリスクを排除し、定義ファイルの品質を保つことを目的としています。

## 2. 配布パッケージ
**以下のファイルはすべて同じフォルダに必要な「セット」です。**

| # | ファイル名 | 役割 | 説明 |
| :--- | :--- | :--- | :--- |
|1| **Filter-File.ps1** | メインスクリプト | 処理の本体です。単独では実行しません。 |
|2| **run_filter-UTF8noBOM.bat** | 実行用BAT | **このアイコンに元ファイルをドロップして実行します。** <br>設定：UTF-8 (BOMなし) / 改行コード LF |
|3| **delete_servers.txt** | 除外リスト<br>(サンプル) | **【利用者作成】** 削除したいサーバ名を記述するファイルです。<br>※同梱されているのはサンプルです。実行の都度、最新のリストを用意してください。 |
|4| **README.md** | 手順書 | 本ファイルです。 |
|5| **REFERENCE.md** | 技術詳細 | カスタマイズ方法やFAQ、トラブルシューティングです。 |

## 3. 実行手順

### 手順1. 除外リストの準備
今回削除したいサーバ名を `delete_servers.txt` に記述して保存してください。
* 1行に1つのキーワードを記述します。
* コメント行（`#` で始まる行）や空行は無視されます。

### 手順2. ファイルのドロップ
処理したいファイル、またはフォルダを `run_filter-UTF8noBOM.bat` にドラッグ＆ドロップしてください。

### 手順3. 結果の確認
元ファイルと同じ場所に `output` フォルダが生成され、その中に処理済みファイルが出力されます。

* **成功時**: 黒い画面に「Success」と表示され、**5秒後に自動的に閉じます**。
    * 標準設定では、成功時にログファイルは自動削除されます。
* **警告/エラー時**: 黒い画面が一時停止（Pause）します。
    * 画面またはログファイルを確認してください。

> **【重要：安全装置について】**
> `output` フォルダ内に同名のファイルが既に存在する場合、上書き防止のため**そのファイルの処理はスキップ（警告）されます**。
> 再実行する場合は、`output` フォルダ内の古いファイルを削除してから実行してください。